# Chapter 04 CPU 스케줄링

## 키워드

- CPU 스케줄링,

## 질문 만들기

### 01 스케줄링 개요

- CPU 스케줄링이란?
- CPU 스케줄링의 단계에 대해서 설명하세요.
- CPU 스케줄링의 목적은?

### 02 스케줄링 시 고려사항

- 선점형 스케줄링과 비선점형 스케줄링을 비교해보세요.

### 03 다중 큐

- 프로그램의 우선순위를 배정하는 방식

## 질문 답안

- CPU 스케줄링이란?
    - **여러 프로세스의 상황을 고려**하여 **CPU와 시스템 자원을 어떻게 배정할지** **결정**하는 일
- CPU 스케줄링의 단계에 대해서 설명하세요.

  발생하는 **빈도** 및 **할당 자원**에 따른 구분

    - 고수준 스케줄링 high level scheduling
        - **시스템 내의 전체 작업 수(프로세스 수)를 조절**하는 것, 여기서 작업은 운영체제에서 다루는 일의 가장 큰 단위로 1개 또는 여러 개의 프로세스로 이루어지고 있다.
        - **전체 시스템의 부하를 고려하여 작업을 시작할지 말지를 걸정**한다. 이 결정에 따라 시스템의 전체 프로세스 수가 결정되는데 이를 멀티프로그랠밍 정도라고 한다.
        - I/O bounded 와 CPU bounded 프로세스들을 잘 섞어서 선택해야 함
            - 잘 섞어야 시스템 효율이 올라감
            - 하나만 선택하면 CPU가 놀게 될 수 있음
        - long-term, job, admission scheduling
    - 저수준 스케줄링 low level scheduling
        - **어떤 프로세스에 CPU를 할당할지**,
        - 어떤 프로세스를 대기 상태로 보낼지 등을 결정하는 일
            - reday 상태에 있는 프로세스를 running 상태로 올려주는 (dispatch)
        - short-term scheduling
            - 가장 빈번하게 발생, 매우 빨라야 한다.
    - 중간 수준 스케줄링 middle level scheduling

      **메모리 할당 결정**

        - 고수준 스케줄링은 프로세스를 활성화할지 말지를 결정하여 전체 프로세스 수를 조절하는 방식인데, 프로세스가 활성화된 후에도 여러 가지 사정으로 시스템에 과부화가 걸릴 수 있다.
        - 시스템 부하를 조절하려면 고수준 스케줄링 대신 중간 수준 스케줄링을 고려해야 한다.
        - 시스템에 과부화가 걸려서 전체 프로세스 수를 조절해야 한다면 **이미 활성화된 프로세스 중 일부를 보류 상태로 보낸다.**
            - 보류된 프로세스는 처리 능력에 여유가 생기면 다시 활성화된다.
        - **중지(suspend) 와 활성화(active)로 전체 시스템의 활성화된 프로세스 수를 조절하여 과부하를 막는다.**
        - 저수준 스케줄링이 원만하게 이루어지도록 완충하는 역할을 한다. (**buffer 역할**)
- CPU 스케줄링의 목적은?
    - 목적에 맞는 지표를 고려하여 스케줄링 기법을 선택해야 한다.
    - **대표적인 시스템 성능 지표**
        - 응답 시간(response time)
            - 작업 요청으로부터 응답을 받을 때까지의 시간
            - interactive system, real-time system
        - 작업 처리량(throughput)
            - 단위 시간 동안 완료된 작업의 수
            - batch system(응답성보단 단위 시간 동안 얼마나 많이 처리했는지?)
        - 자원 활용도(resource utilization)
            - 주어진 시간 동안 자원이 활용된 시간
            - 비싼 장비를 사용한다면 그 장비를 놀게 하지 않고 사용하는 게 중요함

    ---

  ### 참고

  참고

    - 프로세스 수행
        - CPU 사용 + I/O 대기
    - CPU burst
        - CPU 사용 시간
    - I/O burst
        - I/O 대기 시간

      → **burst time은 스케줄링의 중요한 기준 중 하나**
        
      ---

    - 공평성
        - 모든 프로세스가 자원을 공평하게 배정받아야 한다.
        - 특정 프로세스 배제X
    - 효율성
        - 시스템 자원이 유휴 시간 없이 사용되도록 스케줄링한다
        - 유휴자원을 사용하려는 프로세스에는 우선권을 줘야 한다.
    - 안정성
        - 우선 순위를 사용하여 중요 프로세스가 먼저 작동하도록 배정함으로써 시스템 자원을 점유하거나 파괴하려는 프로세스로부터 자원을 보호해야 한다.
    - 확장성
        - 프로세스가 증가해도 시스템이 안정적으로 작동하도록 조치해야 한다.
    - 반응 시간 보장
        - 응답이 없는 경우 사용자는 시스템이 멈춘 것으로 가정하기 때문에 시스템은 적절한 시간 내에 프로세스의 요구에 반응해야 한다.
    - 무한 연기 방지
        - 특정 프로세스의 작업이 무한히 연기되어서는 안된다.
- 선점형 스케줄링과 비선점형 스케줄링을 비교해보세요.
    - 선점형 스케줄링: 뺏을 수 있음
        - 작업 방식: 실행 상태에 있는 작업을 중단시키고 새로운 작업을 실행할 수 있다.
        - 장점: 프로세스가 CPU를 독점할 수 없어 대화형이나 시분할 시스템에 적합하다.
        - 단점
            - 문맥교환에 따른 오버헤드가 많다
        - 사용: 시분할 방식 스케줄링에 사용된다.
        - 중요도: 높다.
    - 비선점형 스케줄링: 못 뺏음
        - 작업 방식: 실행 상태에 있는 작업을 완료될 때까지 다른 작업이 불가능하다.
        - 장점: CPU스케줄러의 작업량이 적고 문맥 교환의 오버헤드가 적다.
        - 단점
            - 기다리는 프로세스가 많아 처리율이 떨어진다.
            - 잦은 우선순위 역전
        - 사용: 일괄 작업 방식 스케줄링에 사용된다.
        - 중요도: 낮다.

- 프로그램의 우선순위를 배정하는 방식
    - 고정 우선 순위 방식과 변동 우선순위 방식이 있다.
        - 고정 우선 순위방식
            - 운영체제가 프로세스에 우선순위를 부여하면 프로세스가 끝날 때까지 바뀌지 않는 방식
            - 구현하기 쉽지만 우선순위를 고정하면 시스템의 변화에 대응하기 어려워 작업 효율이 떨어진다.
        - 변동 우선 순위방식
            - 프로세스 생성 시 부여받은 우선순위가 프로세스 작업 중간에 변하는 방식이다.
            - 구현하기 어렵지만 시스템의 효율성을 높일 수 있다.