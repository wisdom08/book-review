# 19장 이쯤에서 자바의 역사와 JVM에 대해서 알아보자

- 키워드
    - JDK, JRE, JIT, GC,
- 질문 만들기
    - 자바 언어의 특징은?
    - 자바가 플랫폼 중립적인 이유는?
    - JDK, JRE에 대해서 설명하세요.
    - JIT 컴파일러란?
    - 자바 프로그램이 수행되는 절차
    - GC 과정에 대해
    - 가비지컬렉터에 대해서 설명하세요.
    - JVM이란?
- 질문 답안
    - 자바 언어의 특징은?
        - 운영체제에 독립적으로 동작
        - 객체지향적
        - GC를 통한 자동 메모리 관리
        - 동적 로딩 지원
    - 자바가 플랫폼 중립적인 이유는?
        - Java 소스 파일이 OS 위에서 실행되기까지의 과정은 다음과 같다.
            - 먼저, javac(Java 컴파일러)가 .java 파일을 .class 파일로 변환시켜 준다.
                - 여기서 .class 파일은 JAVA Byte Code라고 하며 Byte Code는 기계어가 아니기 때문에 OS가 이해할 수 없다.
            - 이 때 JVM이 OS가 Byte Code를 이해할 수 있도록 해석해주는 역할을 한다. 즉, 컴파일러는 Byte Code를 만들고, 이 코드가 OS에 따라 각기 다르게 해석되기 때문에 .java 파일은 OS에 맞는 JVM이 설치되어 있다면 **어느 OS에서라도, 어느 기기에서라도 실행될 수 있게 되는 것**이다. 위에서 언급했던 혁신적 개념 첫 번째가 이 과정을 통해 구현되는 것이다.
    - JDK, JRE에 대해서 설명하세요.
        - JDK
            - Java Development Kit
            - 개발자들이 자바로 개발하는 데 사용된다.
        - JRE
            - Java Runtime Environment
            - 자바 실행 환경
    - JIT 컴파일러란?
        - Just In TIme 약어
        - 매번 컴파일을 통해 Java파일을 ByteCode로 변환한 후 다시 인터프리터를 통해 한 줄 한 줄 기계어로 변환하는 작업은 속도면에서 매우 비효율적이었습니다. 이를 해결하기 위해 JIT 컴파일러가 생겼습니다.
        - JIT 컴파일러가 소스 코드 전체를 확인한 후 중복된 부분을 미리 기계어로 번역시켜서 저장해놓습니다.
            - 이후 인터프리터 방식으로 번역하다가 **중복된 부분**을 만나게 되면 **이미 변환된 기계어 코드를 재사용**합니다. 따라서 훨씬 시간속도 면에서 개선된 모습을 보여줍니다.
    - 자바 프로그램이 수행되는 절차
        - Java언어로 프로그래밍된 파일을 Java컴파일러가 가상 기계어 파일인 Java클래스 파일로 만든다. 다시 말해, 소스 코드를 Java바이트 코드로 번역한다. 이후 Java바이트 코드를 JVM이 읽고 실행하게 된다.
    - GC 과정에 대해
        - 객체가 처음 생성되고 young-eden 영역에 age-bit 0으로 할당된다.
            - 이 age-bit는 Minor GC에서 살아남을 때마다 1씩 증가하게 된다.
        - 시간이 지나 Heap Area의 Eden 영역에 객체가 다 쌓이게 되면 Minor GC가 한번 일어나게 되고 참조 정도에 따라 Servivor0 영역으로 이동하거나 회수된다.
        - 계속해서 Eden영역에는 신규 객체들이 생성됩니다. 이렇게 또 Eden영역에 객체가 다 쌓이게 되면 Young Generation(Eden+Servivor) 영역에 있는 객체들을 비어있는 Survival인 Survival1 영역에 이동하고 살아남은 모든 객체들은 age가 1씩 증가합니다.
        - 또다시 Eden 영역에 신규 객체들로 가득 차게 되면 다시한번 minor GC가 일어나고 Young Generation(Eden+Servivor) 영역에 있는 객체들을 비어있는 Survival인 Survival0으로 이동시킨 뒤 age를 1 증가시킨다. 이 과정을 계속 반복한다.
        - 이 과정을 반복하다 보면 age bit가 특정 숫자 이상으로 되는 경우가 발생한다. 이때 JVM에서 설정해놓은 age bit에 도달하게 되면 오랫동안 쓰일 객체라고 판단하고 Old generation 영역으로 이동시킨다. 이 과정을 프로모션(Promotion)이라고 한다.
        - 시간이 지나 Old영역에 할당된 메모리가 허용치를 넘게 되면, Old 영역에 있는 모든 객체들을 검사하여 참조되지 않는 객체들을 한꺼번에 삭제하는 GC가 실행됩니다. 이렇게 Old generation영역의 메모리를 회수하는 GC를 Major GC라고 합니다.
            - Major GC는 시간이 오래 걸리는 작업이고 이때 GC를 실행하는 스레드를 제외한 모든 스레드는 작업을 멈추게 됩니다. 이를 'Stop-the-World' 라 합니다. 이 작업이 너무 잦으면 프로그램 성능에 문제가 될 수 있습니다.
    - 가비지컬렉터에 대해서 설명하세요.
        - 가비지 컬렉터는 주기적으로 JVM의 heap 메모리를 점검하여 스택에서 참조되지 않는 객체를 메모리에서 해제하는 장치이다.
    - JVM이란?
        - Java Virtual Machine
        - JVM은 시스템 메모리를 관리하면서 자바 기반 애플리케이션을 위해 이식 가능한 실행 환경을 제공한다.